name = "leaselab-ops"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# Pages configuration
pages_build_output_dir = "./build/client"

# R2 Buckets for file uploads
# Ops app handles file uploads directly, all other data comes from Worker API
[[r2_buckets]]
binding = "PUBLIC_BUCKET"
bucket_name = "leaselab-pub"

[[r2_buckets]]
binding = "PRIVATE_BUCKET"
bucket_name = "leaselab-pri"

[vars]
ENVIRONMENT = "development"
WORKER_URL = "http://localhost:8788"
WORKER_INTERNAL_KEY = "dev-internal-key-change-in-production"

# Preview environment
[env.preview]
name = "leaselab-ops-preview"

[[env.preview.r2_buckets]]
binding = "PUBLIC_BUCKET"
bucket_name = "leaselab-pub-preview"

[[env.preview.r2_buckets]]
binding = "PRIVATE_BUCKET"
bucket_name = "leaselab-pri-preview"

[env.preview.vars]
ENVIRONMENT = "preview"
WORKER_URL = "https://leaselab-worker-preview.yangjeep.workers.dev"
WORKER_INTERNAL_KEY = "preview-internal-key-change-in-production"

# Production environment
[env.production]
name = "leaselab-ops"

[[env.production.r2_buckets]]
binding = "PUBLIC_BUCKET"
bucket_name = "leaselab-pub"

[[env.production.r2_buckets]]
binding = "PRIVATE_BUCKET"
bucket_name = "leaselab-pri"

[env.production.vars]
ENVIRONMENT = "production"
WORKER_URL = "https://leaselab-worker.yangjeep.workers.dev"
WORKER_INTERNAL_KEY = "production-internal-key-change-in-production"
