name = "leaselab-ops"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# Pages configuration
pages_build_output_dir = "./build/client"

# D1 Database - Ops has direct access for performance
[[d1_databases]]
binding = "DB"
database_name = "leaselab-db"
database_id = "850dc940-1021-4c48-8d40-0f18992424ac"

# R2 Buckets for file storage
# Public bucket for property images, etc.
[[r2_buckets]]
binding = "PUBLIC_BUCKET"
bucket_name = "leaselab-pub"

# Private bucket for applications, leases, N11s, etc.
[[r2_buckets]]
binding = "PRIVATE_BUCKET"
bucket_name = "leaselab-pri"

[vars]
ENVIRONMENT = "development"
WORKER_URL = "http://localhost:8788"
WORKER_INTERNAL_KEY = "dev-internal-key-change-in-production"

# Preview environment
[env.preview]
name = "leaselab-ops-preview"

[[env.preview.d1_databases]]
binding = "DB"
database_name = "leaselab-db-preview"
database_id = "33898744-c94f-4233-b22f-2fc29b78bb43"

[[env.preview.r2_buckets]]
binding = "PUBLIC_BUCKET"
bucket_name = "leaselab-pub-preview"

[[env.preview.r2_buckets]]
binding = "PRIVATE_BUCKET"
bucket_name = "leaselab-pri-preview"

[env.preview.vars]
ENVIRONMENT = "preview"
WORKER_URL = "https://leaselab-worker-preview.yangjeep.workers.dev"
WORKER_INTERNAL_KEY = "preview-internal-key-change-in-production"

# Production environment
[env.production]
name = "leaselab-ops"

[[env.production.d1_databases]]
binding = "DB"
database_name = "leaselab-db"
database_id = "850dc940-1021-4c48-8d40-0f18992424ac"

# Public bucket for property images, etc.
[[env.production.r2_buckets]]
binding = "PUBLIC_BUCKET"
bucket_name = "leaselab-pub"

# Private bucket for applications, leases, N11s, etc.
[[env.production.r2_buckets]]
binding = "PRIVATE_BUCKET"
bucket_name = "leaselab-pri"

[env.production.vars]
ENVIRONMENT = "production"
WORKER_URL = "https://leaselab-worker.yangjeep.workers.dev"
WORKER_INTERNAL_KEY = "production-internal-key-change-in-production"
